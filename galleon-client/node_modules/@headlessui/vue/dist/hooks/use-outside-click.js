import{computed as E,ref as v}from"vue";import{FocusableMode as C,isFocusableElement as s}from'../utils/focus-management.js';import{dom as d}from'../utils/dom.js';import{useDocumentEvent as u}from'./use-document-event.js';function y(a,f,l=E(()=>!0)){function i(t,m){if(!l.value||t.defaultPrevented)return;let n=m(t);if(n===null||!n.ownerDocument.documentElement.contains(n))return;let c=function r(e){return typeof e=="function"?r(e()):Array.isArray(e)||e instanceof Set?e:[e]}(a);for(let r of c){if(r===null)continue;let e=r instanceof HTMLElement?r:d(r);if(e!=null&&e.contains(n))return}return!s(n,C.Loose)&&n.tabIndex!==-1&&t.preventDefault(),f(t,n)}let o=v(null);u("mousedown",t=>{l.value&&(o.value=t.target)},!0),u("click",t=>{!o.value||(i(t,()=>o.value),o.value=null)},!0),u("blur",t=>i(t,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}export{y as useOutsideClick};
